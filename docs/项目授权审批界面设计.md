# 项目授权审批界面设计

## 流程配置界面

### 1. 审批流程模板配置页面

此页面用于管理员创建和配置带有授权编号动作的审批流程模板。

```
+------------------------------------------+
| 创建审批流程模板                         |
+------------------------------------------+
| 基本信息                                 |
| 模板名称: [项目授权编号审批流程        ] |
| 适用对象: [项目 ▼]                      |
| 描述:     [用于项目授权编号申请的审批...] |
+------------------------------------------+
| 审批步骤                                 |
+------------------------------------------+
| 步骤 1                                   |
| 名称:    [项目经理审核              ]    |
| 审批人:  [张经理 ▼]                     |
| 动作类型: [普通审批 ▼]                  |
| 发送邮件通知: [✓]                       |
+------------------------------------------+
| 步骤 2                                   |
| 名称:    [总监授权审批             ]     |
| 审批人:  [李总监 ▼]                     |
| 动作类型: [授权编号 ▼]                  |
| 发送邮件通知: [✓]                       |
|                                          |
| 授权编号动作配置:                        |
| [✓] 允许修改项目类型                     |
| [✓] 锁定项目编辑                         |
| [✓] 更新报备日期为审批日期               |
+------------------------------------------+
| 步骤 3                                   |
| 名称:    [最终确认                ]      |
| 审批人:  [王经理 ▼]                     |
| 动作类型: [普通审批 ▼]                  |
| 发送邮件通知: [✓]                       |
+------------------------------------------+
|          [取消]        [保存]            |
+------------------------------------------+
```

### 2. 审批流程模板列表页面

此页面显示所有可用的审批流程模板，包括授权编号类型的模板。

```
+------------------------------------------+
| 审批流程模板管理                         |
+------------------------------------------+
| + 创建新模板                             |
+------------------------------------------+
| 模板名称         | 适用对象 | 状态 | 操作 |
|------------------|----------|------|------|
| 项目授权编号审批 | 项目     | 启用 | 编辑 |
|                  |          |      | 停用 |
|------------------|----------|------|------|
| 报价单审批流程   | 报价单   | 启用 | 编辑 |
|                  |          |      | 停用 |
|------------------|----------|------|------|
| 项目立项审批     | 项目     | 启用 | 编辑 |
|                  |          |      | 停用 |
+------------------------------------------+
```

## 项目详情页面

### 1. 项目详情页集成

在项目详情页中添加授权编号审批相关的组件。

```
+------------------------------------------+
| 项目详情: 某客户业务需求项目             |
+------------------------------------------+
| [返回列表] [编辑] [删除]                 |
+------------------------------------------+
|                                          |
| 【锁定状态通知栏】                       |
| 此项目正在进行授权编号审批，暂时锁定编辑 |
| 锁定人: 张三  锁定时间: 2023-05-19 14:30 |
|                                          |
+------------------------------------------+
| 基本信息                                 |
|                                          |
| 项目名称: 某客户业务需求项目             |
| 项目类型: 销售重点                       |
| 报备来源: 客户直接联系                   |
| 报备时间: 2023-05-15                     |
| 授权编号: 未授权                         |
|                                          |
| 审批状态: 审批中...                      |
+------------------------------------------+
|                                          |
| 审批流程                                 |
|                                          |
| [1. 项目经理审核] ✓                      |
| |                                        |
| [2. 总监授权审批] ⟳ 当前步骤             |
| |                                        |
| [3. 最终确认]                            |
|                                          |
| [查看审批详情]                           |
+------------------------------------------+
```

### 2. 发起授权编号审批对话框

项目所有者用于发起授权编号审批的对话框。

```
+------------------------------------------+
| 发起审批流程                             |
+------------------------------------------+
| 审批流程: [项目授权编号审批流程 ▼]       |
|                                          |
| 说明:                                    |
| 此流程将为项目申请授权编号，审批过程中项 |
| 目将被锁定编辑。审批通过后将自动生成授权 |
| 编号并更新项目报备日期。                 |
|                                          |
| 申请备注:                                |
| [                                      ] |
| [                                      ] |
+------------------------------------------+
|          [取消]        [提交]            |
+------------------------------------------+
```

## 审批处理页面

### 1. 审批详情页面 - 授权编号步骤

特殊设计的授权编号审批步骤页面，允许审批人修改项目类型。

```
+------------------------------------------+
| 授权编号审批 - 项目ID: 123456            |
+------------------------------------------+
| 项目信息                                 |
|                                          |
| 项目名称: 某客户业务需求项目             |
| 当前项目类型: 销售重点                   |
|                                          |
| 授权编号设置:                            |
| 项目类型: [销售重点 ▼]                   |
|           选项: - 销售重点                |
|                 - 渠道跟进                |
|                 - 业务机会                |
|                                           |
| 编号预览: SPJ202305-001                  |
|                                          |
| * 审批通过后将自动生成授权编号并更新项目 |
|   报备日期为今天                         |
+------------------------------------------+
| 审批意见                                 |
| [                                      ] |
| [                                      ] |
+------------------------------------------+
|       [拒绝]         [通过审批]          |
+------------------------------------------+
```

### 2. 审批详情页面 - 一般步骤

常规审批步骤的界面，不包含授权编号特殊功能。

```
+------------------------------------------+
| 审批详情 - 项目ID: 123456                |
+------------------------------------------+
| 项目信息                                 |
|                                          |
| 项目名称: 某客户业务需求项目             |
| 项目类型: 销售重点                       |
| 报备来源: 客户直接联系                   |
| 报备时间: 2023-05-15                     |
| 授权编号: 未授权                         |
+------------------------------------------+
| 审批流程                                 |
|                                          |
| [1. 项目经理审核] ✓                      |
| |  审批人: 张经理                        |
| |  时间: 2023-05-18 14:30                |
| |  意见: 项目基本情况符合要求            |
| |                                        |
| [2. 总监授权审批] ⟳ 当前步骤             |
| |  审批人: 李总监 (您)                   |
| |                                        |
| [3. 最终确认]                            |
+------------------------------------------+
| 审批意见                                 |
| [                                      ] |
| [                                      ] |
+------------------------------------------+
|       [拒绝]         [通过审批]          |
+------------------------------------------+
```

### 3. 授权编号审批完成页面

审批通过后显示授权编号生成结果的页面。

```
+------------------------------------------+
| 审批完成 - 项目ID: 123456                |
+------------------------------------------+
|                                          |
|       ✓ 授权编号审批已通过               |
|                                          |
| 项目名称: 某客户业务需求项目             |
| 项目类型: 销售重点                       |
| 授权编号: SPJ202305-001                  |
| 报备日期: 2023-05-19 (已更新)            |
|                                          |
| 审批历史:                                |
| 1. 项目经理审核 - 张经理 - 已通过        |
|    时间: 2023-05-18 14:30                |
|    意见: 项目基本情况符合要求            |
|                                          |
| 2. 总监授权审批 - 李总监 - 已通过        |
|    时间: 2023-05-19 10:15                |
|    意见: 同意授权，已核实项目类型        |
|                                          |
| 3. 最终确认 - 王经理 - 已通过            |
|    时间: 2023-05-19 11:30                |
|    意见: 流程完成，授权编号已生成        |
+------------------------------------------+
|            [返回项目详情]                |
+------------------------------------------+
```

## 审批流程监控页面

### 1. 授权编号审批统计与监控

为管理员提供的授权编号审批监控页面。

```
+------------------------------------------+
| 授权编号审批监控                         |
+------------------------------------------+
| 授权编号审批统计:                        |
|                                          |
| 当月已完成: 12                           |
| 审批中: 3                                |
| 已拒绝: 2                                |
|                                          |
| 按类型分布:                              |
| 销售重点 (SPJ): 8                        |
| 渠道跟进 (CPJ): 5                        |
| 业务机会 (APJ): 4                        |
+------------------------------------------+
| 最近授权编号审批                         |
+------------------------------------------+
| 项目         | 类型     | 编号         | 状态 |
|--------------|----------|--------------|------|
| 客户A项目    | 销售重点 | SPJ202305-001| 完成 |
| 客户B需求    | 渠道跟进 | CPJ202305-002| 完成 |
| 客户C合作    | 业务机会 | 审批中...    | 处理中|
+------------------------------------------+
```

## 移动端适配

### 1. 移动端授权审批页面

针对移动设备优化的授权审批页面设计。

```
+---------------------------+
| 授权编号审批              |
+---------------------------+
| 项目: 某客户业务需求项目  |
| ID: 123456                |
+---------------------------+
| 项目类型:                 |
| [销售重点 ▼]              |
|                           |
| 编号预览:                 |
| SPJ202305-001             |
+---------------------------+
| 审批意见:                 |
| [                       ] |
| [                       ] |
+---------------------------+
| [拒绝]       [通过审批]   |
+---------------------------+
```

## 交互设计说明

### 1. 项目类型变更逻辑

当审批人在授权编号审批步骤中更改项目类型时：

1. 前端JavaScript实时更新授权编号预览
2. 显示提示信息："更改项目类型将影响授权编号前缀"
3. 审批通过时，将用户选择的项目类型一并提交到后端

### 2. 锁定状态处理

项目锁定状态下的交互规则：

1. 所有编辑按钮显示为禁用状态（灰色）
2. 鼠标悬停时显示提示："项目正在审批中，暂时锁定编辑"
3. 管理员可看到"紧急解锁"按钮，带警告确认对话框

### 3. 审批通知交互

审批流程状态变更的通知方式：

1. 系统内通知栏提醒
2. 可配置的邮件通知
3. 移动端推送通知（如有APP）

### 4. 错误处理

可能的错误情况及处理方式：

1. 项目类型无效：显示错误消息，阻止审批提交
2. 授权编号生成失败：记录错误日志，通知管理员介入
3. 项目锁定/解锁失败：自动重试，持续失败则提供手动操作选项 