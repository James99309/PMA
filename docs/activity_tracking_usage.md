# 活跃度跟踪功能使用说明

## 功能概述

活跃度跟踪功能可以帮助用户快速识别哪些项目和客户处于活跃状态，哪些需要更多关注。系统分别跟踪项目活跃度和客户活跃度，通过监控不同类型的活动，自动标记其活跃状态，提高管理效率。

## 活跃度判断标准

### 项目活跃度判断

系统根据以下条件判断项目是否活跃：

1. **项目阶段推进变更**：项目状态从一个阶段进入另一个阶段
2. **项目基本信息更新**：项目基础数据字段被修改
3. **项目参与单位变更**：项目关联的单位信息（如直接用户、经销商等）发生变更
4. **项目跟进记录更新**：新增或更新了项目的跟进记录
5. **客户跟进记录引用**：在客户跟进记录中引用了该项目
6. **项目报价单更新**：项目的报价单被创建或更新

当项目在指定时间阈值（默认7天）内有上述任何活动，系统会将项目标记为"活跃"状态；否则标记为"不活跃"。

### 客户活跃度判断

系统根据以下条件判断客户是否活跃：

1. **客户基本信息更新**：客户数据被修改
2. **客户联系人信息更新**：添加或修改客户联系人
3. **客户跟进记录的创建和更新**：新增或更新客户跟进记录
4. **客户跟进记录的回复**：对客户跟进记录进行回复
5. **客户关联项目的更新活动**：客户关联的项目有活动更新

当客户在指定时间阈值（默认30天）内有上述任何活动，系统会将客户标记为"活跃"状态；否则标记为"不活跃"。

## 系统管理员功能

### 活跃度阈值设置

作为系统管理员，您可以通过以下步骤分别设置项目和客户的活跃度阈值：

1. 访问系统设置页面（管理 > 系统设置）
2. 在"活跃度阈值设置"部分：
   - 项目活跃度：修改"项目活跃度阈值（天）"
   - 客户活跃度：修改"客户活跃度阈值（天）"
3. 点击"保存设置"按钮应用新的阈值

### 手动刷新活跃度

系统每日会自动更新项目和客户的活跃状态，但作为管理员，您也可以手动触发更新：

1. 访问系统设置页面（管理 > 系统设置）
2. 在"活跃度阈值设置"部分：
   - 找到"项目活跃度手动刷新"区域，点击"刷新项目活跃度"按钮
   - 找到"客户活跃度手动刷新"区域，点击"刷新客户活跃度"按钮
3. 等待刷新完成，系统会显示刷新结果，包括活跃数量、不活跃数量和状态更新数量

## 用户功能

### 查看项目活跃状态

您可以在以下位置查看项目的活跃状态：

1. **项目列表页面**：
   - 每个项目旁边都有一个活跃状态标签（绿色"活跃"或灰色"不活跃"）
   - 您可以通过列表的筛选功能筛选活跃或不活跃的项目

2. **项目详情页面**：
   - 在项目基本信息部分，可以看到活跃状态
   - 最后活动时间：显示项目最近一次活动的时间
   - 活跃原因：显示项目为何被标记为活跃（如"项目基本信息更新"、"项目阶段变更"等）

### 查看客户活跃状态

您可以在以下位置查看客户的活跃状态：

1. **客户列表页面**：
   - 每个客户旁边都有一个活跃状态标签（绿色"活跃"或灰色"不活跃"）
   - 可以通过状态列进行筛选

2. **客户详情页面**：
   - 在客户基本信息部分，可以看到活跃状态
   - 状态文本显示为"活跃"或"不活跃"

### 提升活跃度

如果发现项目或客户处于不活跃状态，可以通过以下操作使其恢复活跃：

#### 提升项目活跃度
1. 更新项目基本信息
2. 推进项目阶段
3. 添加项目跟进记录
4. 为项目创建或更新报价单
5. 在客户跟进记录中引用该项目

#### 提升客户活跃度
1. 更新客户基本信息
2. 添加或更新客户联系人
3. 创建客户跟进记录
4. 回复客户跟进记录
5. 更新与客户关联的项目

## 注意事项

1. 项目和客户活跃度状态每天更新一次，所以您的操作可能不会立即反映在活跃状态上
2. 管理员可以手动触发活跃度更新，立即应用活跃度规则
3. 项目活跃度默认阈值为7天，客户活跃度默认阈值为30天，管理员可调整
4. 新创建的项目和客户默认为活跃状态，直到超过设定的阈值无活动

## 常见问题解答

**问：为什么我刚更新的项目/客户仍显示为不活跃？**  
答：系统通常每日自动更新活跃度状态一次。如需立即更新，请联系系统管理员手动刷新。

**问：项目和客户活跃度阈值有什么区别？**  
答：项目活跃度阈值默认为7天，客户活跃度阈值默认为30天。这是因为项目通常需要更频繁的跟进，而客户关系维护的周期可能更长。

**问：活跃状态会影响系统的哪些功能？**  
答：活跃状态主要用于视觉提示，帮助用户识别需要关注的项目和客户。在项目和客户列表中，可以根据活跃状态进行筛选，优先处理不活跃的记录。

**问：如何批量查看不活跃项目或客户？**  
答：在项目或客户列表页面，您可以使用筛选功能，选择"活跃状态"筛选不活跃的记录。 