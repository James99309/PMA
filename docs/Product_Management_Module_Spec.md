
# 产品管理子模块功能需求文档

## 一、功能概述

在“产品编码模块”基础上，新增一个“产品管理”子菜单，供产品经理进行新产品定义、录入、管理操作。新增的产品仅进入“研发产品库”，需管理员审核后方可进入正式“产品库”。

---

## 二、用户权限说明

| 角色         | 权限                       |
|--------------|----------------------------|
| 产品经理     | 创建、查看、编辑自己创建的产品 |
| 管理员       | 审核、编辑所有产品数据、批准入库 |

---
```
产品管理
├── 产品编码模块（已存在）
└── 产品管理子模块（新增）
```

### 主界面菜单结构新增：
三、功能模块设计

3.1 产品管理首页
功能：
展示研发产品库列表：
显示产品分类、子分类、产品名称、产品型号、产品状态、创建者
产品经理仅能浏览和操作属于自己的产品

操作按钮：
编辑、删除、申请入库

"新增产品"按钮



### 产品管理子模块首页内容：

| 字段名       | 说明                         |
|--------------|------------------------------|
| 产品分类     | 来源于编码模块分类管理        |
| 产品名称     | 与子分类对应，可手动输入      |
| 产品型号     | 下拉选择子分类下已有型号      |
| 产品描述     | 手动填写                       |
| 单位         | 手动填写                       |
| 市场价（预） | 手动填写                       |
| MN 编码      | 自动生成，不可编辑             |
| 产品状态     | 调研中 / 立项中 / 研发中       |
| 创建者       | 自动绑定当前登录用户           |

---

## 四、新增产品流程

1. 选择产品分类（来自产品编码模块app/models/product_code.py和product_categories，1位编码）
2. 选择子分类（绑定分类product_subcategories表，1位编码）
3. 选择销售区域（来自app/models/product_code.py模型和product_code_field_options数据库，1位编码）
4. 输入产品名称（不再自动选择）
5. 输入产品型号（可选择已有，绑定子分类）
6. 自动生成 MN 编码（结构详见下节）
7. 填写产品描述、单位、市场价
8. 进入产品规格页：
    - 显示当前子分类下所有已定义规格字段
    - 若无字段，可新增字段（命名 + 类型）
    - 输入字段内容
9. 点击保存，写入“研发产品库”，状态为“研发中”

新增产品界面
1、产品信息选项卡
产品分类：选择产品编码模块中已有的分类来自产品编码模块app/models/product_code.py和product_categories
产品名称：绑定上级分类，选择分类后自动筛选 product_subcategories表
销售区域：绑定销售区域字段，来自app/models/product_code.py模型和product_code_field_options数据库
产品型号：可下拉选择产品数据库app/models/product.py已有型号中，和产品名称一致的型号作为下拉，也可手动输入
产品状态：选择 [调研中 | 立项中 | 研发中]
产品描述手动填写，单位，市场价（不是必填）

2、规格选项卡
根据分类和子分类，查找已在编码模块中定义的指标字段
如果未存在则可新建字段，并要注意：
新建字段后如有产品填写数据则不可删除
字段包括：指标名称，值 (可空)
如不足可接着新增一行
---


## 五、MN 编码结构

格式：`X X X XXXXX`（共 8 位）
- 第 1 位：分类编码（Product Category）
- 第 2 位：子分类编码（Sub-category）
- 第 3 位：销售区域编码（Region）
- 第 4-8 位：规格编码（从规范库匹配，或自动分配）

例子：`P X1 FSDFE`

---

## 六、数据库设计建议

### 1. 新表：研发产品库 `dev_products`

| 字段名          | 类型        | 说明               |
|------------------|-------------|--------------------|
| id               | Integer     | 主键               |
| category_id      | ForeignKey  | 分类表关联          |
| subcategory_id   | ForeignKey  | 子分类表关联        |
| region_id        | ForeignKey  | 区域表关联          |
| name             | String      | 产品名称            |
| model            | String      | 产品型号            |
| description      | Text        | 描述               |
| unit             | String      | 单位               |
| retail_price     | Numeric     | 市场价             |
| status           | Enum/String | 调研中 / 立项中 / 研发中 |
| mn_code          | String      | 自动生成的MN编码    |
| created_by       | ForeignKey  | 用户表关联（产品经理）|
| created_at       | DateTime    | 创建时间            |

### 2. 复用已有：

- 分类表 `product_categories`
- 子分类表 `product_subcategories`
- 区域表 `sales_regions`
- 指标字段定义表 `spec_fields`
- 指标字段内容表 `spec_values`

---

