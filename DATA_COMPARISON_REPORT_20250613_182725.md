# 数据库完整性对比分析报告

**生成时间**: 2025-06-13 18:27:25
**备份文件**: ./cloud_backup_20250613_151838.sql
**云端数据库**: Render PostgreSQL

## 📊 总体统计

| 统计项 | 备份文件 | 云端数据库 | 差异 |
|--------|----------|------------|------|
| 表数量 | 47 | 53 | -6 |
| 总记录数 | 11,679 | 31 | 11,648 |

## 🚨 重大差异表

| 表名 | 备份记录数 | 云端记录数 | 差异 | 差异率 | 状态 |
|------|------------|------------|------|--------|------|
| quotation_details | 4,032 | 0 | +4,032 | 100.0% | 🚨 重大差异 |
| project_scoring_records | 3,237 | 0 | +3,237 | 100.0% | 🚨 重大差异 |
| contacts | 718 | 0 | +718 | 100.0% | 🚨 重大差异 |
| actions | 668 | 3 | +665 | 99.6% | 🚨 重大差异 |
| companies | 519 | 0 | +519 | 100.0% | 🚨 重大差异 |
| projects | 468 | 0 | +468 | 100.0% | 🚨 重大差异 |
| project_total_scores | 375 | 0 | +375 | 100.0% | 🚨 重大差异 |
| project_stage_history | 359 | 0 | +359 | 100.0% | 🚨 重大差异 |
| quotations | 338 | 0 | +338 | 100.0% | 🚨 重大差异 |
| products | 186 | 0 | +186 | 100.0% | 🚨 重大差异 |
| change_logs | 145 | 0 | +145 | 100.0% | 🚨 重大差异 |
| role_permissions | 98 | 0 | +98 | 100.0% | 🚨 重大差异 |
| dev_product_specs | 75 | 0 | +75 | 100.0% | 🚨 重大差异 |
| product_subcategories | 60 | 0 | +60 | 100.0% | 🚨 重大差异 |
| approval_instance | 49 | 0 | +49 | 100.0% | 🚨 重大差异 |
| product_code_field_options | 45 | 0 | +45 | 100.0% | 🚨 重大差异 |
| product_code_fields | 43 | 0 | +43 | 100.0% | 🚨 重大差异 |
| approval_record | 35 | 0 | +35 | 100.0% | 🚨 重大差异 |
| dictionaries | 25 | 0 | +25 | 100.0% | 🚨 重大差异 |
| users | 24 | 0 | +24 | 100.0% | 🚨 重大差异 |
| pricing_order_details | 22 | 0 | +22 | 100.0% | 🚨 重大差异 |
| settlement_order_details | 22 | 0 | +22 | 100.0% | 🚨 重大差异 |
| permissions | 19 | 0 | +19 | 100.0% | 🚨 重大差异 |
| user_event_subscriptions | 16 | 0 | +16 | 100.0% | 🚨 重大差异 |
| project_scoring_config | 11 | 0 | +11 | 100.0% | 🚨 重大差异 |
| inventory | 0 | 0 | +0 | 0.0% | ⚠️ 备份缺失 |
| inventory_transactions | 0 | 0 | +0 | 0.0% | ⚠️ 备份缺失 |
| purchase_order_details | 0 | 0 | +0 | 0.0% | ⚠️ 备份缺失 |
| purchase_orders | 0 | 0 | +0 | 0.0% | ⚠️ 备份缺失 |
| settlement_details | 0 | 0 | +0 | 0.0% | ⚠️ 备份缺失 |
| settlements | 0 | 0 | +0 | 0.0% | ⚠️ 备份缺失 |

## 🎯 关键业务表分析

### quotations
- **备份记录**: 338 条
- **云端记录**: 0 条
- **差异**: +338 条 (100.0%)
- **状态**: major_diff

### quotation_details
- **备份记录**: 4,032 条
- **云端记录**: 0 条
- **差异**: +4,032 条 (100.0%)
- **状态**: major_diff

### projects
- **备份记录**: 468 条
- **云端记录**: 0 条
- **差异**: +468 条 (100.0%)
- **状态**: major_diff

### companies
- **备份记录**: 519 条
- **云端记录**: 0 条
- **差异**: +519 条 (100.0%)
- **状态**: major_diff

### contacts
- **备份记录**: 718 条
- **云端记录**: 0 条
- **差异**: +718 条 (100.0%)
- **状态**: major_diff

### products
- **备份记录**: 186 条
- **云端记录**: 0 条
- **差异**: +186 条 (100.0%)
- **状态**: major_diff

### users
- **备份记录**: 24 条
- **云端记录**: 0 条
- **差异**: +24 条 (100.0%)
- **状态**: major_diff

### affiliations
- **备份记录**: 37 条
- **云端记录**: 28 条
- **差异**: +9 条 (24.3%)
- **状态**: minor_diff

## 💡 建议和行动计划

### 📋 后续措施
1. 建立定期数据备份机制
2. 实施数据库监控和告警
3. 考虑迁移到更稳定的平台
4. 建立数据恢复标准流程
